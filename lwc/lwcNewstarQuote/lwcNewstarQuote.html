<template>

    <div class="slds-grid slds-wrap">

        <template if:false={actionInProgress}>

            <div class="slds-col slds-size_1-of-1">

                <template if:true={isAfterQuoteStage}>

                    <div class="slds-grid slds-gutters slds-m-top_small">
                        <div class="slds-col slds-size_1-of-12">
                            <lightning-icon icon-name="utility:error" alternative-text="Error!" variant="error">
                            </lightning-icon>
                        </div>
                        <div class="slds-col slds-size_11-of-12">
                            This opportunity is currently in the {stageName} stage. The quote cannot be managed at this
                            stage. You can initiate a contract/offer or reserve the lot for the customer in other tabs
                            of this dialog.
                        </div>

                    </div>

                </template>

                <!-- deal is generally available for quote -->
                <template if:false={isAfterQuoteStage}>

                    <!-- quote already exists -->
                    <template if:true={isAtQuoteStage}>

                        <p>This opportunity is already a quote scenario. You can review and modify options,
                            upgrades and incentives/discounts applicable to this quote in
                            NEWSTAR Sales.
                        </p>

                        <p>
                            If this quote is no longer applicable to the customer, you can close
                            it below.
                        </p>

                        <lightning-button label="Close quote" variant="destructive" class="slds-m-top_large"
                            onclick={handleQuoteClosing}>
                        </lightning-button>

                    </template>

                    <!-- no existing quote -->
                    <template if:false={isAtQuoteStage}>
                        <p>
                            Start a quote for the customer by sending their information along with realtor and
                            model/lot selections to NEWSTAR Sales. Estimated financial amounts will be calculated in
                            NEWSTAR Sales
                            and the quote will be available for options/upgrades selection.
                        </p>


                        <lightning-button label="Create quote" variant="brand" onclick={handleQuoteCreation}
                            class="slds-m-top_large">
                        </lightning-button>
                    </template>
                </template>
            </div>

        </template>
    </div>
</template>